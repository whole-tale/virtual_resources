[tox]
envlist = lint,pytest

[testenv:pytest]
deps =
  -rrequirements-dev.txt
commands =
  pytest {posargs}

[testenv:lint]
skip_install = true
skipdist = true
deps =
  flake8
  flake8-bugbear
  flake8-comprehensions
  flake8-docstrings
  flake8-import-order
  pep8-naming
commands =
  flake8 {posargs}

[testenv:coverage]
skip_install = true
skipsdist = true
deps =
    coverage
commands =
    coverage combine
    coverage report
    coverage html
    coverage xml

[flake8]
max-line-length = 100
show-source = True
max-complexity = 14
format = pylint
exclude =
    node_modules,
    .eggs,
    .git,
    __pycache__,
    .tox
ignore =
    # D10 - Missing docstring (errors D100 - D107)
    D10,
    # D200 - One-line docstrings should fit on one line with quotes.
    D200,
    # D205 - Blank line required between one-line summary and description.
    D205,
    # D400 - First line should end with a period.
    D400,
    # D401 - First line should be in imperative mood.
    D401,
    # E123 - Closing bracket does not match indentation of opening bracket's line
    E123,
    # N802 - Function name should be lowercase.
    N802,
    # N803 - Argument name should be lowercase.
    N803,
    # N806 - Variable in function should be lowercase.
    N806,
    # N812 - Lowercase imported as non lowercase.
    N812,
    # N815 - mixedCase variable in class scope
    N815,
    # N816 - mixedCase variable in global scope
    N816,
    # N818 - error suffix in exception name
    N818,
    # W503 - Line break occurred before a binary operator
    W503,

[pytest]
addopts = --verbose --strict --showlocals
cache_dir = build/test/pytest_cache
junit_family = xunit2
testpaths = test
